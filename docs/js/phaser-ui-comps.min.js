!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("phaser"),require("underscore")):"function"==typeof define&&define.amd?define(["phaser","underscore"],t):"object"==typeof exports?exports.PhaserComps=t(require("phaser"),require("underscore")):e.PhaserComps=t(e.Phaser,e._)}(window,function(e,t){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(2);var r,o=n(1);(r=o)&&r.__esModule;var a="event_state",u=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.lockId=null,i._parent=e,i._key=n,i._clip=null,i._texts={},n&&e&&e.on(a,i._onEventState,i),i._clipUpdate(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.Events.EventEmitter),i(t,null,[{key:"EVENT_STATE",get:function(){return a}}]),i(t,[{key:"appendClip",value:function(e){this._clip!==e&&(null!==this._clip&&this.removeClip(),this._clip=e,this._clip&&this.onClipAppend(this._clip),this._clipProcess())}},{key:"onClipAppend",value:function(e){}},{key:"removeClip",value:function(){this.onClipRemove(this._clip),this._clip=null}},{key:"onClipRemove",value:function(e){}},{key:"doState",value:function(){var e=this.getStateId();this._setupState(e)}},{key:"getText",value:function(e){return this._texts[e]}},{key:"setText",value:function(e,t){if(this._texts[e]!==t&&(this._texts[e]=t,this._clip)){var n=this._clip.getChildText(e);n&&(n.text=t)}}},{key:"getStateId",value:function(){return"default"}},{key:"destroy",value:function(){this._parent&&this._parent.removeListener(a,this._onEventState),this._clip&&this._clip.destroy()}},{key:"_clipUpdate",value:function(){if(this._key)if(this._parent._clip){var e=this._parent._clip.getChildClip(this._key);this.appendClip(e)}else this.appendClip(null);else;}},{key:"_clipProcess",value:function(){this._clip&&(this.doState(),this.onClipProcess())}},{key:"onClipProcess",value:function(){}},{key:"_setupState",value:function(e){if(this._clip)for(var t in this._clip.setState(e),this._texts){var n=this._clip.getChildText(t);n&&(n.text=this._texts[t])}this.emit(a)}},{key:"_onEventState",value:function(){this._clipUpdate()}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=!1,o=[],a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"lock",value:function(e){this.unlock(),"string"==typeof e?o.push(e):e.forEach(function(e){return o.push(e)}),r=!0}},{key:"unlock",value:function(){o.length=0,r=!1}},{key:"check",value:function(e){return!r||-1!==o.indexOf(e)}}]),e}();t.default=a},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=a(n(0)),o=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._enable=!0,r._isPressed=!1,r._isOver=!1,i&&(r.label=i),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),i(t,null,[{key:"EVENT_CLICK",get:function(){return"event_click"}}]),i(t,[{key:"onClipAppend",value:function(e){this._updateInteractive()}},{key:"onClipRemove",value:function(e){var t=e.getChildClip("HIT_ZONE");t&&this._removeInteractive(t)}},{key:"_setupInteractive",value:function(e){e.setInteractive({useHandCursor:!0}),e.on("pointerdown",this._onPointerDown,this),e.on("pointerup",this._onPointerUp,this),e.on("pointerover",this._onPointerOver,this),e.on("pointerout",this._onPointerOut,this)}},{key:"_removeInteractive",value:function(e){e.disableInteractive(),e.removeListener("pointerdown",this._onPointerDown,this),e.removeListener("pointerup",this._onPointerUp,this),e.removeListener("pointerover",this._onPointerOver,this),e.removeListener("pointerout",this._onPointerOut,this)}},{key:"_updateInteractive",value:function(){if(this._clip){var e=this._clip.getChildClip("HIT_ZONE");e&&(this.enable?this._setupInteractive(e):this._removeInteractive(e))}}},{key:"getStateId",value:function(){return this.enable?this._isPressed?this.STATE_DOWN:this._isOver?this.STATE_OVER:this.STATE_UP:this.STATE_DISABLE}},{key:"_onClick",value:function(){this.emit("event_click")}},{key:"_onPointerOut",value:function(){this._isOver=!1,this._isPressed=!1,this.doState()}},{key:"_onPointerOver",value:function(){this._isOver=!0,this.doState()}},{key:"_onPointerDown",value:function(){this._isPressed=!0,this.doState()}},{key:"_onPointerUp",value:function(){var e=this._isPressed&&this._isOver;this._isPressed=!1,this.doState(),e&&o.default.check(this.lockId)&&this._onClick()}},{key:"destroy",value:function(){if(this._clip){var e=this._clip.getChildClip("HIT_ZONE");e&&this._removeInteractive(e)}(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"label",get:function(){return this.getText("label")},set:function(e){this.setText("label",e)}},{key:"enable",get:function(){return this._enable},set:function(e){this._enable!==e&&(this._enable=e,this._updateInteractive(),this.doState())}},{key:"STATE_UP",get:function(){return"up"}},{key:"STATE_DOWN",get:function(){return"down"}},{key:"STATE_OVER",get:function(){return"over"}},{key:"STATE_DISABLE",get:function(){return"disable"}}]),t}();t.default=u},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=a(n(2)),o=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(e){function t(e,n,i){u(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,0,0));return r.childComponentClips=[],r._config=n,r._key=n.key,r._textures=i,r.imageFramesMap={},r._stateManager=new c(r,n),r._childrenById={},r._createImagesMap(i),r._parseConfig(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.GameObjects.Container),i(t,[{key:"getStateConfig",value:function(e){return this._stateManager.getStateConfigById(e)}},{key:"getStateIds",value:function(){return this._stateManager.stateIds}},{key:"setState",value:function(e,t){this._stateManager.setState(e,t)}},{key:"applyChildParams",value:function(e,n){this._childrenById.hasOwnProperty(e)&&t._setupCommonParams(this._childrenById[e],n)}},{key:"getChildClip",value:function(e){return this._stateManager.getActiveComponentByKey(e)}},{key:"getChildText",value:function(e){return this._stateManager.getActiveComponentByKey(e)}},{key:"destroy",value:function(){o.default.each(this.childComponentClips,function(e){e.destroy()},this)}},{key:"_createImagesMap",value:function(e){var t=this;o.default.each(e,function(e){var n=t.scene.textures.get(e);if(n){var i=n.getFrameNames();o.default.each(i,function(n){t.imageFramesMap[n]=e},t)}},this)}},{key:"_parseConfig",value:function(){var e=this;this._config.hasOwnProperty("children")&&o.default.each(this._config.children,function(t){e._createChildFromConfig(t)},this)}},{key:"_createChildFromConfig",value:function(e){var n=this,i=null,r=e.childId,a=e.key,u=!0;if("image"===e.type)i=this._createImageFromConfig(e);else if("text"===e.type)i=this._createTextFromConfig(e);else if("tileSprite"===e.type)i=this._createTileSpriteFromConfig(e);else if("component"===e.type)i=new t(this.scene,e,this._textures),t._setupCommonParams(i,e);else if("zone"===e.type)i=this._createHitZoneFromConfig(e);else if("polygon"===e.type&&(i=this._createPolygonFromConfig(e),e.hasOwnProperty("masking"))){var s=i.createGeometryMask();o.default.each(e.masking,function(e){n._childrenById[e].setMask(s)},this),u=!1}null!==i&&(this._childrenById[r]=i,this.childComponentClips.push(i),u&&this.add(i),this._stateManager.addComponent(i,r,a))}},{key:"_createPolygonFromConfig",value:function(e){var n=this.scene.make.graphics();n.fillStyle(e.color,e.hasOwnProperty("alpha")?e.alpha:1),n.beginPath();for(var i=e.vertices,r=i.length,o=0;o<r;o+=2)n.lineTo(i[o],i[o+1]);return n.closePath(),n.fillPath(),t._setupCommonParams(n,e),e.hasOwnProperty("masking")||this.scene.add.existing(n),n}},{key:"_createTileSpriteFromConfig",value:function(e){var n=this.scene.add.tileSprite(0,0,e.width,e.height,this.imageFramesMap[e.image],e.image);return n.setOrigin(.5,.5),t._setupCommonParams(n,e),n}},{key:"_createImageFromConfig",value:function(e){var n=this.scene.add.image(0,0,this.imageFramesMap[e.image],e.image);return n.setOrigin(0),t._setupCommonParams(n,e),n}},{key:"_createTextFromConfig",value:function(e){var n=this.scene.add.text(0,0,e.text,e.textStyle);return"center"===e.textStyle.align?n.setOrigin(.5,0):"right"===e.textStyle.align?n.setOrigin(1,0):n.setOrigin(0),t._setupCommonParams(n,e),n}},{key:"_createHitZoneFromConfig",value:function(e){return this.scene.add.zone(e.x||0,e.y||0,e.width,e.height).setOrigin(0)}}],[{key:"_setupCommonParams",value:function(e,t){var n=t.x||0,i=t.y||0,r=t.scaleX||1,o=t.scaleY||1,a=t.angle||0,u=t.hasOwnProperty("alpha")?t.alpha:1;e.x=n,e.y=i,e.scaleX=r,e.scaleY=o,e.angle=a,e.alpha=u}}]),t}();t.default=s;var l=function e(t){u(this,e),this.config=t,this.componentIds=[],this.componentIds=Object.keys(t)},c=function(){function e(t,n){u(this,e),this._clip=t,this._dynamicChildrenIds=[],this._states={},this.stateIds=[],this._components={},this._currentState=null,this._currentStateId=null,this._componentKeys={},this._residentComponentsByKey={};var i=[];for(var r in n.states){this.stateIds.push(r);var a=new l(n.states[r]);this._states[r]=a,i.push(a.componentIds)}this._dynamicChildrenIds=o.default.uniq(o.default.flatten(i))}return i(e,[{key:"getStateConfigById",value:function(e){return this._states.hasOwnProperty(e)?this._states[e].config:null}},{key:"addComponent",value:function(e,t,n){-1===o.default.indexOf(this._dynamicChildrenIds,t)?void 0!==n&&(this._residentComponentsByKey[n]=e):(this._components[t]=e,void 0!==n&&(this._componentKeys[t]=n))}},{key:"setState",value:function(e,t){(this._currentStateId!==e||t)&&this._states.hasOwnProperty(e)&&(this._currentStateId=e,this._currentState=this._states[e],this.setupState())}},{key:"getActiveComponentByKey",value:function(e){if(this._residentComponentsByKey.hasOwnProperty(e))return this._residentComponentsByKey[e];if(null===this._currentState)return null;for(var t in this._currentState.componentIds){var n=this._currentState.componentIds[t];if(this._componentKeys[n]===e)return this._components[n]}return null}},{key:"setupState",value:function(){var e=this,t=this._currentState.componentIds,n=o.default.difference(this._dynamicChildrenIds,t);o.default.each(n,function(t){e._components[t].visible=!1},this),o.default.each(t,function(t){var n=e._components[t];n.visible=!0,s._setupCommonParams(n,e._currentState.config[t])},this)}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},a=n(3),u=(i=a)&&i.__esModule?i:{default:i};var s=function(e){function t(e,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));return r._select=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),r(t,[{key:"getStateId",value:function(){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getStateId",this).call(this)+(this._select?"_select":"")}},{key:"_onClick",value:function(){this._select=!this._select,this.doState(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onClick",this).call(this)}},{key:"select",get:function(){return this._select},set:function(e){this._select!==e&&(this._select=e,this.doState())}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=u(n(3)),a=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));return r._dragBounds={minX:0,maxX:0,minY:0,maxY:0},r._startDragX=0,r._startDragY=0,r._dragZone=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,null,[{key:"EVENT_DRAG",get:function(){return"event_drag"}}]),r(t,[{key:"setDragBounds",value:function(e,t,n,i){this._dragBounds.minX=e,this._dragBounds.maxX=n,this._dragBounds.minY=t,this._dragBounds.maxY=i}},{key:"_onDragStart",value:function(e,t){this._dragZone&&this._dragZone===t&&this._clip&&(this._startDragX=this._clip.x-t.input.dragStartX,this._startDragY=this._clip.y-t.input.dragStartY)}},{key:"_onDrag",value:function(e,t,n,i){if(a.default.check(this.lockId)&&this._dragZone&&this._dragZone===t&&!this.clip){var r=this._startDragX+n,o=this._startDragY+i;r<this._dragBounds.minX?r=this._dragBounds.minX:r>this._dragBounds.maxX&&(r=this._dragBounds.maxX),o<this._dragBounds.minY?o=this._dragBounds.minY:o>this._dragBounds.maxY&&(o=this._dragBounds.maxY),this.emit("event_drag",r,o)}}},{key:"_setupInteractive",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_setupInteractive",this).call(this,e),this._dragZone=e,e.scene.input.setDraggable(e,!0),e.scene.input.on("dragstart",this._onDragStart,this),e.scene.input.on("drag",this._onDrag,this)}},{key:"_removeInteractive",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_removeInteractive",this).call(this,e),this._dragZone=null,e.scene.input.setDraggable(e,!1),e.scene.input.removeListener("dragstart",this._onDragStart),e.scene.input.removeListener("drag",this._onDrag)}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=l(n(0)),a=l(n(3)),u=l(n(7)),s=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._vertical=i||!1,r._value=0,r._minValue=0,r._maxValue=1,r._valueStep=0,r._buttonStep=.1,r.btnPrev=new a.default(r,"btn_up"),r.btnPrev.on(a.default.EVENT_CLICK,r.onPrevClick,r),r.btnNext=new a.default(r,"btn_down"),r.btnNext.on(a.default.EVENT_CLICK,r.onNextClick,r),r.thumb=new u.default(r,"thumb"),r.thumb.on(u.default.EVENT_DRAG,r._onThumbDrag,r),r._trackStart=0,r._trackLength=100,r._thumbClip=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,null,[{key:"EVENT_CHANGE",get:function(){return"event_change"}}]),r(t,[{key:"setValueBounds",value:function(e,t,n){this._minValue=e,this._maxValue=t,void 0!==n?(this._valueStep=n,this._buttonStep<n&&(this._buttonStep=n)):this._valueStep=0}},{key:"setButtonStep",value:function(e){this._buttonStep=e}},{key:"onClipAppend",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onClipAppend",this).call(this,e),this._updateClips()}},{key:"_updateClips",value:function(){if(this._clip){this._thumbClip=this.thumb._clip;var e=this._clip.getChildClip("DIMENSIONS");e&&(this._trackStart=this._vertical?e.y:e.x,this._trackLength=this._vertical?e.height:e.width,this._thumbClip&&this.thumb.setDragBounds(this._vertical?this._thumbClip.x:e.x,this._vertical?e.y:this._thumbClip.y,this._vertical?this._thumbClip.x:e.x+e.width,this._vertical?e.y+e.height:this._thumbClip.y));var t=this._clip.getChildClip("HIT_ZONE");t&&t.on("pointerdown",this._onZoneDown,this),this._updateThumbFromValue()}}},{key:"onClipProcess",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onClipProcess",this).call(this),this.thumb&&this._updateClips()}},{key:"onPrevClick",value:function(){s.default.check(this.lockId)&&(this.value-=this._buttonStep)}},{key:"onNextClick",value:function(){s.default.check(this.lockId)&&(this.value+=this._buttonStep)}},{key:"_updateThumbFromValue",value:function(){if(this._thumbClip){var e=Math.round(this._trackStart+this._trackLength*this._value);this._vertical?this._thumbClip.y=e:this._thumbClip.x=e,this.emit("event_change",this.value)}}},{key:"_onThumbDrag",value:function(e,t){if(0!==this._trackLength&&s.default.check(this.lockId)){var n=((this._vertical?t:e)-this._trackStart)/this._trackLength*(this._maxValue-this._minValue);0!==this._valueStep&&(n=Math.round(n/this._valueStep)*this._valueStep),this.value=n+this._minValue}}},{key:"_onZoneDown",value:function(){}},{key:"value",get:function(){var e=this._value*(this._maxValue-this._minValue);return 0===this._valueStep?e+this._minValue:(e=Math.round(e/this._valueStep)*this._valueStep)+this._minValue},set:function(e){var t=(e-this._minValue)/(this._maxValue-this._minValue);t<0&&(t=0),t>1&&(t=1),t!==this._value&&(this._value=t,this._updateThumbFromValue())}}]),t}();t.default=c},function(e,t,n){e.exports=n(10)},function(e,t,n){"use strict";(function(t){var i=u(n(5)),r=u(n(12)),o=u(n(17)),a=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}var s={ComponentClip:i.default,UIComponents:r.default,Plugin:o.default,UIManager:a.default};e.exports=s,t.PhaserComps=s}).call(this,n(11))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(n(3)),r=f(n(13)),o=f(n(0)),a=f(n(6)),u=f(n(7)),s=f(n(8)),l=f(n(14)),c=f(n(15)),p=f(n(16));function f(e){return e&&e.__esModule?e:{default:e}}var h={UIComponentPrototype:o.default,UIButton:i.default,UIButtonSelect:a.default,UIButtonRadio:r.default,UIButtonDraggable:u.default,UIScrollBar:s.default,UIScrollPanel:l.default,UIProgressBar:c.default,UIContainer:p.default};t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(6),a=(i=o)&&i.__esModule?i:{default:i};var u=function(e){function t(e,n,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i));return a._sibling=a,a._value=r,void 0!==o&&a.appendToRadio(o),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,null,[{key:"EVENT_SELECT",get:function(){return"event_select"}}]),r(t,[{key:"appendToRadio",value:function(e){this._sibling!==this&&this.removeFromSibling(),this._sibling=e._sibling,e._sibling=this}},{key:"removeFromSibling",value:function(){}},{key:"_onClick",value:function(){this.select=!0}},{key:"_broadcastSelect",value:function(){this.emit("event_select",this.value);for(var e=this._sibling;e!==this;)e.emit("event_select",this._value),e=e._sibling}},{key:"select",get:function(){return function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"select",this)},set:function(e){if(this._select!==e&&(function e(t,n,i,r){var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);null!==a&&e(a,n,i,r)}else if("value"in o&&o.writable)o.value=i;else{var u=o.set;void 0!==u&&u.call(r,i)}return i}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"select",e,this),e)){for(var n=this._sibling;n!==this;)n.select=!1,n=n._sibling;this._broadcastSelect()}}},{key:"value",get:function(){return this._value},set:function(e){this._value=e}},{key:"valueSelected",get:function(){if(this.select)return this.value;for(var e=this._sibling;e!==this;){if(e.select)return e.value;e=e._sibling}return null},set:function(e){if(this.value!==e){for(var t=this._sibling;t!==this;)if(t.value===e)return void(t.select=!0)}else this.select=!0}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=a(n(0)),o=a(n(8));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t,n,i,a,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._container=t,t.on(r.default.EVENT_STATE,this._onContainerUpdate,this),this._panelKey=n,this._dimensionsKey=a,this._scrollBar=new o.default(t,i,u),this._scrollBar.on(o.default.EVENT_CHANGE,this._onScrollBar,this),this._vertical=u||!1}return i(e,[{key:"_onContainerUpdate",value:function(){var e=this._container._clip;if(e){this._panel=e.getChildClip(this._panelKey);var t=e.getChildClip(this._dimensionsKey);this._panel&&t&&(this._scrollBounds={x:t.x,y:t.y,len:this._vertical?this._panel.height-t.height:this._panel.width-t.width},this._onScrollBar(this._onScrollBar.value))}}},{key:"_onScrollBar",value:function(e){this._panel&&this._scrollBounds&&(this._vertical?this._panel.y=this._scrollBounds.y-this._scrollBounds.len*e:this._panel.x=this._scrollBounds.x-this._scrollBounds.len*e)}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=(i=o)&&i.__esModule?i:{default:i},u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(4));var s=/progress_(\d+)$/,l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i._value=0,i._steps=[],i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"onClipAppend",value:function(e){(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onClipAppend",this).call(this,e),this._makeSteps(e),this._applyValue()}},{key:"_applyValue",value:function(){if(this._clip){var e=void 0,t=void 0,n=void 0,i=void 0,r=void 0,o=void 0,a=this._steps.length;for(e=0;e<a-1;e++){var u=this._steps[e],s=this._steps[e+1];if(u.stepValue===this._value){r=u.config;break}if(s.stepValue===this._value){r=s.config;break}if(this._value>u.stepValue&&this._value<s.stepValue){t=u.config,n=s.config,i=(this._value-u.stepValue)/(s.stepValue-u.stepValue);break}}if(!r)for(o in r={},t)if(n.hasOwnProperty(o)){var l=t[o],c=n[o];r[o]={x:l.x+(c.x-l.x)*i,y:l.y+(c.y-l.y)*i,scaleX:l.scaleX+(c.scaleX-l.scaleX)*i,scaleY:l.scaleY+(c.scaleY-l.scaleY)*i,angle:l.angle+(c.angle-l.angle)*i,alpha:l.alpha+(c.alpha-l.alpha)*i}}for(o in r)this._clip.applyChildParams(o,r[o])}}},{key:"_makeSteps",value:function(e){var n=this,i=e.getStateIds();this._steps=[],u.each(i,function(i){if(s.test(i)){var r={},o={stepValue:parseInt(s.exec(i)[1])/100,config:r},a=e.getStateConfig(i);for(var u in a)r[u]=t._makeFullConfig(a[u]);n._steps.push(o)}},this),u.sortBy(this._steps,"stepValue")}},{key:"value",get:function(){return this._value},set:function(e){this._value=e,this._applyValue()}}],[{key:"_makeFullConfig",value:function(e){return{x:e.hasOwnProperty("x")?e.x:0,y:e.hasOwnProperty("y")?e.y:0,scaleX:e.hasOwnProperty("scaleX")?e.scaleX:1,scaleY:e.hasOwnProperty("scaleY")?e.scaleY:1,angle:e.hasOwnProperty("angle")?e.angle:0,alpha:e.hasOwnProperty("alpha")?e.alpha:1}}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=u(n(0));n(2);var a=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i._children=[],i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),i(t,[{key:"addChild",value:function(e){return-1!==this._children.indexOf(e)?e:(this._children.push(e),this._clip?(e._clip.visible=!0,this._addUIComponentToContainerClip(e)):e._clip.visible=!1,e)}},{key:"removeChild",value:function(e){var t=this._children.indexOf(e);return-1===t?e:(this._children.splice(t,1),this._clip&&this._removeUIComponentFromContainerClip(e),e)}},{key:"_addUIComponentToContainerClip",value:function(e){this._clip.add(e._clip),e._clip.visible=!0}},{key:"_removeUIComponentFromContainerClip",value:function(e,t){this._clip.remove(e._clip,t),e._clip.visible=!1}},{key:"onClipAppend",value:function(e){var n=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onClipAppend",this).call(this,e),e&&a.default.each(this._children,function(e){n._addUIComponentToContainerClip(e)},this)}},{key:"onClipRemove",value:function(e){var n=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onClipRemove",this).call(this,e),e&&a.default.each(this._children,function(e){n._removeUIComponentFromContainerClip(e)},this)}},{key:"destroy",value:function(){var e=this;a.default.each(this._children,function(t){e._clip&&e._removeUIComponentFromContainerClip(t),t.destroy()},this),this._children.length=0,r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(2);var r,o=n(5),a=(r=o)&&r.__esModule?r:{default:r};var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return e.registerGameObject("ui_component",n.addComponent,n.makeComponent),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Phaser.Plugins.BasePlugin),i(t,[{key:"addComponent",value:function(e,t){var n=new a.default(this.scene,e,t);return this.scene.add.existing(n),n}},{key:"makeComponent",value:function(e,t){return new a.default(this.scene,e,t)}}]),t}();t.default=u;var s={key:"UIComponents",plugin:u,start:!0};u.DefaultCfg=s}])});